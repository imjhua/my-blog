---
date: 2023-01-01
title: 웹 바이탈 & Lighthouse로 확인할 수 있는 지표
slug: /tech/web-vitals-lighthouse
tags: [tech]
---

## 웹 바이탈의 3가지 핵심 메트릭스(코어 웹 바이탈)

코어 웹 바이탈(Core web vitals)은 웹 페이지 로딩 속도, 모바일 친화성, 세이프 브라우징, 암호화(HTTPS적용 여부), 방해요소 여부 등과 같은 웹 콘텐츠 이용자의 사용 경험에 영향을 미치는 다양한 측정 가능한 값들 중에서 구글이 중요하다 강조하는 3가지 메트릭스는 다음과 같다.

- LCP(Largest Contentful Pain)
- FID(First Input Delay)
- CLS(Cumulative Layout Shift)를 말합니다.

코어 웹 바이탈(Core web vitals)에 들어가는 이 3가지 매트릭스에 굳이 코어라는 단어를 붙여 부르는 이유는 웹사이트에 방문하는 유저들의 경험을 좌우하는 여러 요소 중 가장 기본이자 핵심 지표이기 때문이다.

### LCP(Largest Contentful Paint)

LCP는 웹 페이지의 로딩 속도에 대한 지표로서 뷰포트 중에서 가장 큰 요소인 main이나 section뿐만 아니라 제목, div, 양식 요소를 포함하는데 텍스트 요소가 포함된 모든 HTML 요소들이 브라우저 화면에서 렌더링 완료되는데까지 걸리는 시간의 길이를 말한다. 여기서 뷰포트란 웹페이지 사용자가 스크롤하지 않고 볼 수 있는 영역을 말한다. LCP는 뷰포트 중에서 이미지, 이미지 태그, 비디오 썸네일, CSS가 있는 배경 이미지, 단락, 머리글, 그리고 목록과 같은 텍스트 요소 등의 로딩 속도만을 계산한다. 구글이 제공하는 Lighthouse, Chrome DevTools, PageSpeed Insight 등에서 LCP를 측정할 수 있다. 2.5초 이하일 경우 좋은 상태이고, 4초 이상이면 문제가 있다고 봐야 한다.

### FID(First Input Delay, 혹은 TBT)

웹 페이지와 사용자간의 상호 작용에 대한 매트릭스다. 사용자가 웹 페이지에 들어와서 로딩되고 있는 상태에서 링크를 클릭하거나 버튼을 탭하거나 자바스크립트 기반의 콘트롤을 사용할 때 브라우저는 중요 콘텐츠 요소 로딩이 완료될 때까지 요청받은 액션을 처리를 일정 시간 보류한다. 즉 브라우저에서 다음 액션이 가능하게 되는 시간까지의 길이를 측정한 시간 지표가 FID이며, 밀리세컨드 (ms)로 측정한다. 이 지표가 중요하게 보는 것은 요청 받은 액션을 처리하는데 걸리는 시간이 아니라 입력 지연을 시키는 시간이다. 이 지표는 웹 페이지 사용자의 경험을 모니터링하고 최적화하려고 할 때 유용한 지표이지만 사용자 환경에서 사용자가 체감하는 지표이기 때문에 테스트 환경에서 확인할 수 있는 지표가 아니라서 시뮬레이션을 통해 측정 할 수 없다. 구글은 다양한 테스트 환경에서 측정 가능한 총 차단 시간(Total Blocking Time)을 FID 지표를 대신해서 측정하라고 말한다. TBT는 페이지로드 중 발생하는 입력 작업 불가능 시간의 합계이므로 항상 낮을수록 좋다. 100 ms 이하이면 좋은 상태이고, 300 ms 이상이면 나쁜 상태라고 할 수 있다.

### CLS( Cumulative Layout Shift)

비쥬얼 안정성에 대한 매트릭스다. 뉴스 기사를 보려고 들어간 웹사이트에서 기사 링크를 클릭하려는 순간 레이아웃이 이동해서 광고가 나타나 기사가 아닌 광고를 클릭한 경험이 누구나 한두번 쯤을 있을 것이다. 이렇게 어떤 페이지에 들어갔을 때 갑작스럽게 발생하는 레이아웃 이동의 정도를 합산 이동 거리라는 개념을 도입해서 만들어낸 지표가 바로 CLS다. 이 점수 역시 FID나 LCP처럼 낮은 점수를 받을 수로 사용자에게 좋은 혹은 안정적인 레이아웃이라고 말할 수 있다. 0.1 이하의 CLS라면 양호한 것이고, 0.1~ 0.25라면 개선이 필요한 것이고 0.25 이상이면 나쁜 상태라고 말할 수 있다.

## Lighthouse로 확인할 수 있는 지표

Lighthouse 버전 6.0부터 사용되지 않는 메트릭를 제외하면 총 6개가 있다.

### FCP(First Contentful Paint)

사용자가 특정 웹 페이지로 이동했을 때, 브라우저가 첫 번째 DOM의 콘텐츠를 렌더링하는 데 걸리는 시간

### Speed Index

웹 페이지를 불러올 때, 콘텐츠가 시각적으로 표시되는 데까지 걸리는 시간

### LCP(Largest Contentful Paint)

뷰포트에서 가장 큰 콘텐츠 요소가 화면에 렌더링 될 때까지 걸리는 시간

### TTI(Time To Interactive)

웹 페이지가 완전히 상호작용할 수 있는 상태가 될 때까지 걸리는 시간

### TBT(Total Blocking Time)

웹 페이지가 사용자 입력에 응답하지 못하도록 차단된 총 시간
= 로딩 중 메인 스레드가 긴 시간동안 중단되어 응답을 받을 수 없을 정도로 걸린 시간

### CLS(Cumulative Layout Shift)

이미지/광고의 느린 로딩, 비동기 동작, 동적 DOM 변경 등으로 웹 페이지의 레이아웃이 얼마나 변하는 지 측정한 값
사용자가 잘못된 클릭을 하도록 유발하는 시각적 불안정성을 체크하는 지표

## 그외

### FMP(First Meaningful Paint)

사용자가 페이지를 불러오기 시작하면서 스크롤을 내리지 않은 채 제일 먼저 볼 수 있는 영역에 존재하는 주요한 콘텐츠를 렌더링하는 데 걸리는 시간

참고) Lighthouse 버전 6.0 이후로 사용되지 않음. 작은 차이에도 매우 민감하게 측정되어 일관성 없는 결과를 초래하였기 때문.

### First CPU Idle

웹 페이지가 최소한으로 상호작용할 수 있는 상태가 될 때까지 걸리는 시간
참고) Lighthouse 버전 6.0 이후로 사용되지 않음. Time To Interactive와 측정 기준이 유사했지만 의미 있는 결과값을 보이지 못함.

---

- https://developer.chrome.com/docs/lighthouse/performance/performance-scoring/#lighthouse-8
- https://www.ascentkorea.com/core-web-vitals/